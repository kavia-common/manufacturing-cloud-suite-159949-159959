{"is_source_file": true, "format": "Python", "description": "This file defines API routes for user management within an administrative context, utilizing FastAPI framework. It includes endpoints for listing, creating, retrieving, updating, deleting users, and managing user roles, interacting with a SecurityRepository for database operations.", "external_files": ["src/core/deps", "src/core/security", "src/repositories/security", "src/schemas/auth"], "external_methods": ["get_tenant_session", "require_roles", "get_tenant_id", "get_password_hash", "SecurityRepository.list_users", "SecurityRepository.list_roles_for_user", "SecurityRepository.get_user_by_email", "SecurityRepository.create_user", "SecurityRepository.get_user_by_id", "SecurityRepository.update_user", "SecurityRepository.delete_user", "SecurityRepository.get_role_by_id", "SecurityRepository.assign_role_to_user", "SecurityRepository.remove_role_from_user"], "published": ["list_users", "create_user", "get_user", "update_user", "delete_user", "assign_role", "remove_role"], "classes": [], "methods": [{"name": "UserRead _user_to_read(user, roles: List[str])", "description": "Converts a user object and associated roles into a UserRead schema for API responses.", "scope": "", "scopeKind": ""}, {"name": "UserRead assign_role( user_id: UUID, role_id: UUID, session: AsyncSession = Depends(get_tenant_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UserRead create_user( payload: UserCreate, session: AsyncSession = Depends(get_tenant_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None delete_user( user_id: UUID = Path(...), session: AsyncSession = Depends(get_tenant_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UserRead get_user( user_id: UUID = Path(...), session: AsyncSession = Depends(get_tenant_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[UserRead] list_users( session: AsyncSession = Depends(get_tenant_session), limit: int = 100, offset: int = 0, )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UserRead remove_role( user_id: UUID, role_id: UUID, session: AsyncSession = Depends(get_tenant_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UserRead update_user( user_id: UUID = Path(...), payload: UserUpdate = ..., session: AsyncSession = Depends(get_tenant_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["SecurityRepository(session).list_users", "SecurityRepository(session).list_roles_for_user", "SecurityRepository(session).get_user_by_email", "get_password_hash", "SecurityRepository(session).create_user", "SecurityRepository(session).get_user_by_id", "SecurityRepository(session).update_user", "SecurityRepository(session).delete_user", "SecurityRepository(session).get_role_by_id", "SecurityRepository(session).assign_role_to_user", "SecurityRepository(session).remove_role_from_user"], "search-terms": ["FastAPI user routes", "SecurityRepository user management", "User role assignment", "admin user endpoints", "API route handlers for users"], "state": 2, "file_id": 40, "knowledge_revision": 92, "git_revision": "", "ctags": [{"_type": "tag", "name": "_user_to_read", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^def _user_to_read(user, roles: List[str]) -> UserRead:$/", "language": "Python", "typeref": "typename:UserRead", "kind": "function", "signature": "(user, roles: List[str])"}, {"_type": "tag", "name": "assign_role", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def assign_role($/", "language": "Python", "typeref": "typename:UserRead", "kind": "function", "signature": "( user_id: UUID, role_id: UUID, session: AsyncSession = Depends(get_tenant_session), )"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def create_user($/", "language": "Python", "typeref": "typename:UserRead", "kind": "function", "signature": "( payload: UserCreate, session: AsyncSession = Depends(get_tenant_session), )"}, {"_type": "tag", "name": "delete_user", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def delete_user($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( user_id: UUID = Path(...), session: AsyncSession = Depends(get_tenant_session), )"}, {"_type": "tag", "name": "get_user", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def get_user($/", "language": "Python", "typeref": "typename:UserRead", "kind": "function", "signature": "( user_id: UUID = Path(...), session: AsyncSession = Depends(get_tenant_session), )"}, {"_type": "tag", "name": "list_users", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def list_users($/", "language": "Python", "typeref": "typename:List[UserRead]", "kind": "function", "signature": "( session: AsyncSession = Depends(get_tenant_session), limit: int = 100, offset: int = 0, )"}, {"_type": "tag", "name": "remove_role", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def remove_role($/", "language": "Python", "typeref": "typename:UserRead", "kind": "function", "signature": "( user_id: UUID, role_id: UUID, session: AsyncSession = Depends(get_tenant_session), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^router = APIRouter(prefix=\"\\/admin\\/users\", tags=[\"Users\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_user", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/routes/users.py", "pattern": "/^async def update_user($/", "language": "Python", "typeref": "typename:UserRead", "kind": "function", "signature": "( user_id: UUID = Path(...), payload: UserUpdate = ..., session: AsyncSession = Depends(get_tenant_session), )"}], "hash": "092144f47a0d9032532d7c0b601a7d54", "format-version": 4, "code-base-name": "manufacturing_api", "filename": "manufacturing_api/src/api/routes/users.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/admin\\/users\", tags=[\"Users\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"92": ""}]}