{"is_source_file": true, "format": "Python", "description": "Main FastAPI application setup file for deploying a manufacturing-related API service. It initializes middleware, defines startup events for database migration and seeding, and registers various API route modules. It also provides health check endpoints, tenant echo, and WebSocket connection info.", "external_files": ["src.core.settings", "src.core.deps", "src.db.run_migrations", "src.db.seed", "src.schemas.common", "src.api.routes.auth", "src.api.routes.users", "src.api.routes.roles", "src.api.routes.inventory", "src.api.routes.procurement", "src.api.routes.production", "src.api.routes.master_data", "src.api.routes.quality", "src.api.routes.scheduling"], "external_methods": ["get_app_settings", "get_tenant_id", "main (from src.db.run_migrations)", "seed_all"], "published": ["health_check", "tenant_health_echo", "websocket_info"], "classes": [], "methods": [{"name": "None on_startup()", "description": "Function called at application startup to run database migrations and optionally seed data, with exception handling.", "scope": "", "scopeKind": ""}, {"name": "MessageResponse health_check()", "description": "Endpoint for a basic liveness check, returning a MessageResponse indicating health.", "scope": "", "scopeKind": ""}, {"name": "TenantEcho tenant_health_echo(tenant_id=Depends(get_tenant_id))", "description": "Endpoint that echoes back the tenant ID from the request header to verify tenant context handling.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] websocket_info()", "description": "Provides usage information for WebSocket endpoints, currently a placeholder.", "scope": "", "scopeKind": ""}], "calls": ["run_alembic", "seed_all", "logger.info", "logger.exception", "logger.info"], "search-terms": ["FastAPI", "database migrations", "seed data", "health check", "tenant echo", "WebSocket info", "routing", "middleware"], "state": 2, "file_id": 1, "knowledge_revision": 136, "git_revision": "6b81cec3a8cad681a0fc61e8bb08e1a1a42f0473", "revision_history": [{"6": "f64d9862d7b83a0942d77423126ce41003234ad8"}, {"76": "f64d9862d7b83a0942d77423126ce41003234ad8"}, {"77": "06068ff228e7e597e70061c7ebfce1a73fe861df"}, {"97": "06068ff228e7e597e70061c7ebfce1a73fe861df"}, {"98": "06068ff228e7e597e70061c7ebfce1a73fe861df"}, {"134": "6b81cec3a8cad681a0fc61e8bb08e1a1a42f0473"}, {"135": "6b81cec3a8cad681a0fc61e8bb08e1a1a42f0473"}, {"136": "6b81cec3a8cad681a0fc61e8bb08e1a1a42f0473"}], "ctags": [{"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auth_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.auth import router as auth_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^def health_check() -> MessageResponse:$/", "language": "Python", "typeref": "typename:MessageResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "inventory_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.inventory import router as inventory_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "masterdata_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.master_data import router as masterdata_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^async def on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "procurement_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.procurement import router as procurement_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "production_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.production import router as production_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "quality_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.quality import router as quality_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "roles_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.roles import router as roles_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "run_alembic", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.db.run_migrations import main as run_alembic$/", "language": "Python", "kind": "unknown", "nameref": "unknown:main"}, {"_type": "tag", "name": "scheduling_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.scheduling import router as scheduling_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^settings = get_app_settings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "tenant_health_echo", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^async def tenant_health_echo(tenant_id=Depends(get_tenant_id)) -> TenantEcho:$/", "language": "Python", "typeref": "typename:TenantEcho", "kind": "function", "signature": "(tenant_id=Depends(get_tenant_id))"}, {"_type": "tag", "name": "users_router", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^from src.api.routes.users import router as users_router$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "websocket_info", "path": "/home/kavia/workspace/code-generation/manufacturing-cloud-suite-159949-159959/manufacturing_api/src/api/main.py", "pattern": "/^def websocket_info() -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "()"}], "hash": "b256a70d8736884ca88a423dbb7c2231", "format-version": 4, "code-base-name": "manufacturing_api", "filename": "manufacturing_api/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "settings = get_app_settings()", "scope": "", "scopeKind": "", "description": "unavailable"}]}